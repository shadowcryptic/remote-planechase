<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Display</title>
</head>
<body>
  <div id="output">Waiting...</div>

  <script type="module">
    import { db, doc, onSnapshot } from "./common.js";

    const roomId = "my-room"; // MUST match controller
    const roomRef = doc(db, "rooms", roomId);

    onSnapshot(roomRef, (snap) => {
      const out = document.getElementById("output");

      if (!snap.exists()) {
        out.textContent = "Room doc not found: rooms/" + roomId;
        return;
      }

      const data = snap.data();
      out.textContent = "idx = " + (data.idx ?? "(missing)");
    });
  </script>
</body>
</html>
